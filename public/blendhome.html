<html>
    <head>
        <title>blendify - home</title>
        <link rel="stylesheet" href="/blendstyle.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/simple-slider/1.0.0/simpleslider.min.js" defer></script>
        <script src="/blendjava.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js" defer></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <!--files that exist so far
            blendhome.html
            blendabout.html
            blendhelp.html
            blendstyle.css
            blendjava.js
        -->
    </head>
    <!--onload will fetch artists-->
    <body onload="onPageLoad()">
        <div id="NavBar">
        <span id="NavBarPosition">
            <a class="active" href="blendhome.html">home</a>
            <a href="blendabout.html">about</a>
            <a href="blendhelp.html">help</a>
        </span>
        </div>
        <div id="ParentBody">
            <div id="BodyLeft">
                <h1>blendify</h1>
                <p>Connect your Spotify account to get a blended playlist of your favorite genre!</p>
                <button class="generateButton" onclick="getTopArtists()">Press here to generate your top artists.</button>
                <br>
                <form id="getRecommendations" onsubmit="">
                <div class="PickGenre">
                    <button id="genreButton" class="genreButton"> Pick a Genre </button>
                    <div class="genres">
                        <a href="#" onclick="selectGenre('Pop')"> Pop </a>
                        <a href="#" onclick="selectGenre('Rock')"> Rock </a>
                        <a href="#" onclick="selectGenre('Rap')"> Rap </a>
                        <a href="#" onclick="selectGenre('R&B')"> R&B </a>
                        <a href="#" onclick="selectGenre('EDM')"> EDM </a>
                        <a href="#" onclick="selectGenre('Country')"> Country </a>
                        <a href="#" onclick="selectGenre('Jazz')"> Jazz </a>
                        <a href="#" onclick="selectGenre('Classical')"> Classical </a>
                        <a href="#" onclick="selectGenre('Indie')"> Indie </a>
                        <a href="#" onclick="selectGenre('Metal')"> Metal </a>
                    </div>
                </div>
                <br><br>
                <input type="submit" class="generateButton" onclick="callArtistRecs(); return false" value="generate recommendations">
            </form>
            <div id="recommendations">
                <table id="recommendationTable" border="1">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Song Name</th>
                            <th>Artist</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic content will go here -->
                    </tbody>
                </table>
            </div>
            </div>
            <div id="BodyRight">
                <h2>blendify web is now available with audio controls!</h2>
                <p>Say "hello". Make sure to keep your microphone enabled!</p>

            </div>
            <div id="Blendify">
                <p>the results of the 'blend' will go here</p>
            </div>
            <div id="TopArtistsChart">
                <p>**chart (using javascript charting library) that shows the users top artists **</p>
            </div>
        </div>
        <script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>
        <script> 
                
        if (annyang) {
        var commands = {

            'hello': function() {
                alert('hi user! on each page you will find voice control guidance to ease your navigation! here is what you can do:\n\n 1. go to *page of your choice*\n 2. say, show me my top artists\n 3. say, how me a picture - you will need to make popups available for this\n\n options 2 an d3 are home page only');},

            'go to *page': function(page) {
                page = page.trim().toLowerCase();
                if (page === 'home') {
                    setTimeout(function() {window.location.href = "blendhome.html";}, 1000)
                }
                else if (page === 'help') {
                    setTimeout(function() {window.location.href = "blendhelp.html";}, 1000)
                }
                else if (page === 'about') {
                    setTimeout(function() {window.location.href = "blendabout.html";}, 1000)
                }
                else {
                    alert('make sure you choose a page that exists! ex: "go to help"');
                }
            },

            'show me my top artists': function() {
                alert('Your top artists are: ' + artistData[0].name + ', '+ artistData[1].name + ', ' + artistData[2].name + ', ' + artistData[3].name + ', ' + artistData[4].name + ', ' + artistData[5].name + ', '+ artistData[6].name + ', ' + artistData[7].name + ', ' + artistData[8].name + ', ' + artistData[9].name + '.');
            },

            'show me a picture': function() {
                const imgArray = [artistData[0].images.map(image => image.url), artistData[1].images.map(image => image.url), artistData[2].images.map(image => image.url), artistData[3].images.map(image => image.url), artistData[4].images.map(image => image.url), artistData[5].images.map(image => image.url), artistData[6].images.map(image => image.url), artistData[7].images.map(image => image.url), artistData[8].images.map(image => image.url), artistData[9].images.map(image => image.url)]

                const flatImgArray = imgArray.flat();
                console.log(flatImgArray)
                const randomImage = flatImgArray[Math.floor(Math.random() * flatImgArray.length)];
                window.open(randomImage, "_blank");
            },
        };
        annyang.addCommands(commands);
        annyang.start();
        }
        </script>
    </body>
</html>